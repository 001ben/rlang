<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bind symbols to objects in an environment — env_bind • rlang</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<meta property="og:title" content="Bind symbols to objects in an environment — env_bind" />

<meta property="og:description" content="These functions create bindings in an environment. The bindings are
supplied through ... as pairs of names and values or expressions.
env_bind() is equivalent to evaluating a &lt;- expression within
the given environment. This function should take care of the
majority of use cases but the other variants can be useful for
specific problems.
env_bind() takes named values which are bound in .env.
env_bind() is equivalent to base::assign().
env_bind_fns() takes named functions and creates active
bindings in .env. This is equivalent to
base::makeActiveBinding(). An active binding executes a
function each time it is evaluated. env_bind_fns() takes dots
with implicit splicing, so that you can supply
both named functions and named lists of functions.
If these functions are closures they are lexically
scoped in the environment that they bundle. These functions can
thus refer to symbols from this enclosure that are not actually
in scope in the dynamic environment where the active bindings are
invoked. This allows creative solutions to difficult problems
(see the implementations of dplyr::do() methods for an
example).
env_bind_exprs() takes named expressions. This is equivalent
to base::delayedAssign(). The arguments are captured with
exprs() (and thus support call-splicing and unquoting) and
assigned to symbols in .env. These expressions are not
evaluated immediately but lazily. Once a symbol is evaluated, the
corresponding expression is evaluated in turn and its value is
bound to the symbol (the expressions are thus evaluated only
once, if at all).
" />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rlang</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Lifecycle</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Bind symbols to objects in an environment</h1>
    </div>

    
    <p>These functions create bindings in an environment. The bindings are
supplied through <code>...</code> as pairs of names and values or expressions.
<code>env_bind()</code> is equivalent to evaluating a <code>&lt;-</code> expression within
the given environment. This function should take care of the
majority of use cases but the other variants can be useful for
specific problems.</p><ul>
<li><p><code>env_bind()</code> takes named <em>values</em> which are bound in <code>.env</code>.
<code>env_bind()</code> is equivalent to <code><a href='http://www.rdocumentation.org/packages/base/topics/assign'>base::assign()</a></code>.</p></li>
<li><p><code><a href='env_bind_exprs.html'>env_bind_fns()</a></code> takes named <em>functions</em> and creates active
bindings in <code>.env</code>. This is equivalent to
<code><a href='http://www.rdocumentation.org/packages/base/topics/bindenv'>base::makeActiveBinding()</a></code>. An active binding executes a
function each time it is evaluated. <code><a href='env_bind_exprs.html'>env_bind_fns()</a></code> takes dots
with <a href='splice.html'>implicit splicing</a>, so that you can supply
both named functions and named lists of functions.</p>
<p>If these functions are <a href='is_function.html'>closures</a> they are lexically
scoped in the environment that they bundle. These functions can
thus refer to symbols from this enclosure that are not actually
in scope in the dynamic environment where the active bindings are
invoked. This allows creative solutions to difficult problems
(see the implementations of <code><a href='http://dplyr.tidyverse.org/reference/do.html'>dplyr::do()</a></code> methods for an
example).</p></li>
<li><p><code><a href='env_bind_exprs.html'>env_bind_exprs()</a></code> takes named <em>expressions</em>. This is equivalent
to <code><a href='http://www.rdocumentation.org/packages/base/topics/delayedAssign'>base::delayedAssign()</a></code>. The arguments are captured with
<code><a href='quotation.html'>exprs()</a></code> (and thus support call-splicing and unquoting) and
assigned to symbols in <code>.env</code>. These expressions are not
evaluated immediately but lazily. Once a symbol is evaluated, the
corresponding expression is evaluated in turn and its value is
bound to the symbol (the expressions are thus evaluated only
once, if at all).</p></li>
</ul>
    

    <pre class="usage"><span class='fu'>env_bind</span>(<span class='no'>.env</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.env</th>
      <td><p>An environment or an object bundling an environment,
e.g. a formula, <a href='quotation.html'>quosure</a> or <a href='is_function.html'>closure</a>.
This argument is passed to <code><a href='get_env.html'>get_env()</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Pairs of names and expressions, values or functions.
These dots support <a href='tidy-dots.html'>tidy dots</a> features.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The input object <code>.env</code>, with its associated environment
modified in place, invisibly.</p>
    
    <h2 class="hasAnchor" id="side-effects"><a class="anchor" href="#side-effects"></a>Side effects</h2>

    
    <p>Since environments have reference semantics (see relevant section
in <code><a href='env.html'>env()</a></code> documentation), modifying the bindings of an environment
produces effects in all other references to that environment. In
other words, <code>env_bind()</code> and its variants have side effects.</p>
<p>As they are called primarily for their side effects, these
functions follow the convention of returning their input invisibly.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># env_bind() is a programmatic way of assigning values to symbols</span>
<span class='co'># with `&lt;-`. We can add bindings in the current environment:</span>
<span class='fu'>env_bind</span>(<span class='fu'><a href='get_env.html'>get_env</a></span>(), <span class='kw'>foo</span> <span class='kw'>=</span> <span class='st'>"bar"</span>)
<span class='no'>foo</span></div><div class='output co'>#&gt; [1] "bar"</div><div class='input'>
<span class='co'># Or modify those bindings:</span>
<span class='no'>bar</span> <span class='kw'>&lt;-</span> <span class='st'>"bar"</span>
<span class='fu'>env_bind</span>(<span class='fu'><a href='get_env.html'>get_env</a></span>(), <span class='kw'>bar</span> <span class='kw'>=</span> <span class='st'>"BAR"</span>)
<span class='no'>bar</span></div><div class='output co'>#&gt; [1] "BAR"</div><div class='input'>
<span class='co'># It is most useful to change other environments:</span>
<span class='no'>my_env</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='env.html'>env</a></span>()
<span class='fu'>env_bind</span>(<span class='no'>my_env</span>, <span class='kw'>foo</span> <span class='kw'>=</span> <span class='st'>"foo"</span>)
<span class='no'>my_env</span>$<span class='no'>foo</span></div><div class='output co'>#&gt; [1] "foo"</div><div class='input'>
<span class='co'># A useful feature is to splice lists of named values:</span>
<span class='no'>vals</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='fl'>20</span>)
<span class='fu'>env_bind</span>(<span class='no'>my_env</span>, !!! <span class='no'>vals</span>, <span class='kw'>c</span> <span class='kw'>=</span> <span class='fl'>30</span>)
<span class='no'>my_env</span>$<span class='no'>b</span></div><div class='output co'>#&gt; [1] 20</div><div class='input'><span class='no'>my_env</span>$<span class='no'>c</span></div><div class='output co'>#&gt; [1] 30</div><div class='input'>
<span class='co'># You can also unquote a variable referring to a symbol or a string</span>
<span class='co'># as binding name:</span>
<span class='no'>var</span> <span class='kw'>&lt;-</span> <span class='st'>"baz"</span>
<span class='fu'>env_bind</span>(<span class='no'>my_env</span>, !!<span class='no'>var</span> <span class='kw'>:=</span> <span class='st'>"BAZ"</span>)
<span class='no'>my_env</span>$<span class='no'>baz</span></div><div class='output co'>#&gt; [1] "BAZ"</div><div class='input'>

<span class='co'># env_bind() and its variants are generic over formulas, quosures</span>
<span class='co'># and closures. To illustrate this, let's create a closure function</span>
<span class='co'># referring to undefined bindings:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() <span class='fu'>list</span>(<span class='no'>a</span>, <span class='no'>b</span>)
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='get_env.html'>set_env</a></span>(<span class='no'>fn</span>, <span class='fu'><a href='env.html'>child_env</a></span>(<span class='st'>"base"</span>))

<span class='co'># This would fail if run since `a` etc are not defined in the</span>
<span class='co'># enclosure of fn() (a child of the base environment):</span>
<span class='co'># fn()</span>

<span class='co'># Let's define those symbols:</span>
<span class='fu'>env_bind</span>(<span class='no'>fn</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='st'>"a"</span>, <span class='kw'>b</span> <span class='kw'>=</span> <span class='st'>"b"</span>)

<span class='co'># fn() now sees the objects:</span>
<span class='fu'>fn</span>()</div><div class='output co'>#&gt; [[1]]
#&gt; [1] "a"
#&gt; 
#&gt; [[2]]
#&gt; [1] "b"
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#side-effects">Side effects</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
