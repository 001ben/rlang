<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Call stack information — stack • rlang</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Call stack information — stack" />

<meta property="og:description" content="
The eval_ and call_ families of functions provide a replacement
for the base R functions prefixed with sys. (which are all about
the context stack), as well as for parent.frame() (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Call stack information</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/lifecycle-retired.R'><code>R/lifecycle-retired.R</code></a></small>
    <div class="hidden name"><code>stack.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><img src='figures/lifecycle-soft-deprecated.svg' alt='Soft-deprecated lifecycle' /></p>
<p>The <code>eval_</code> and <code>call_</code> families of functions provide a replacement
for the base R functions prefixed with <code>sys.</code> (which are all about
the context stack), as well as for <code><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>parent.frame()</a></code> (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous.</p>
    
    </div>

    <pre class="usage"><span class='fu'>global_frame</span>()

<span class='fu'>current_frame</span>()

<span class='fu'>ctxt_frame</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'>call_frame</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>ctxt_depth</span>()

<span class='fu'>call_depth</span>()

<span class='fu'>ctxt_stack</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>call_stack</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of frames to go back in the stack.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Whether to post-process the call stack to clean
non-standard frames. If <code>TRUE</code>, suboptimal call-stack entries by
<code><a href='https://www.rdocumentation.org/packages/base/topics/eval'>base::eval()</a></code> will be cleaned up: the duplicate frame created by
<code><a href='https://www.rdocumentation.org/packages/base/topics/eval'>eval()</a></code> is eliminated.</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>The number of layers of intervening frames to trim off
the stack. See <code><a href='stack_trim.html'>stack_trim()</a></code> and examples.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>ctxt_frame()</code> and <code>call_frame()</code> return a <code>frame</code> object
containing the following fields: <code>expr</code> and <code>env</code> (call expression
and evaluation environment), <code>pos</code> and <code>caller_pos</code> (position of
current frame in the context stack and position of the caller), and
<code>fun</code> (function of the current frame). <code>ctxt_stack()</code> and
<code>call_stack()</code> return a list of all context or call frames on the
stack. Finally, <code>ctxt_depth()</code> and <code>call_depth()</code> report the
current context position or the number of calling frames on the
stack.</p>
<p>The base R functions take two sorts of arguments to indicate which
frame to query: <code>which</code> and <code>n</code>. The <code>n</code> argument is
straightforward: it's the number of frames to go down the stack,
with <code><a href='https://www.rdocumentation.org/packages/base/topics/assignOps'>n = 1</a></code> referring to the current context. The <code>which</code> argument
is more complicated and changes meaning for values lower than 1.
For the sake of consistency, the rlang functions all take the
same kind of argument <code>n</code>. This argument has a single meaning (the
number of frames to go down the stack) and cannot be lower than 1.</p>
<p>Note finally that <code><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>parent.frame(1)</a></code> corresponds to
<code><a href='https://www.rdocumentation.org/packages/base/topics/Extract'>call_frame(2)$env</a></code>, as <code><a href='https://www.rdocumentation.org/packages/base/topics/assignOps'>n = 1</a></code> always refers to the current
frame. This makes the <code>_frame()</code> and <code>_stack()</code> functions
consistent: <code>ctxt_frame(2)</code> is the same as <code><a href='https://www.rdocumentation.org/packages/base/topics/Extract'>ctxt_stack()[[2]]</a></code>.
Also, <code>ctxt_depth()</code> returns one more frame than
<code><a href='https://www.rdocumentation.org/packages/base/topics/sys.parent'>base::sys.nframe()</a></code> because it counts the global frame. That is
consistent with the <code>_stack()</code> functions which return the global
frame as well. This way, <code>call_stack(call_depth())</code> is the same as
<code>global_frame()</code>.</p>
    
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    
    <p>These functions are soft-deprecated and replaced by <code><a href='trace_back.html'>trace_back()</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Expressions within arguments count as contexts</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_depth</span>())) <span class='co'># returns 2</span></div><div class='output co'>#&gt; <span class='warning'>Warning: `ctxt_depth()` is soft-deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'>This warning is displayed once per session.</span></div><div class='output co'>#&gt; [1] 38</div><div class='input'>
<span class='co'># But they are not part of the call stack because arguments are</span>
<span class='co'># evaluated within the calling function (or the global environment</span>
<span class='co'># if called at top level)</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>call_depth</span>())) <span class='co'># returns 0</span></div><div class='output co'>#&gt; <span class='warning'>Warning: `call_depth()` is soft-deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'>This warning is displayed once per session.</span></div><div class='output co'>#&gt; [1] 14</div><div class='input'>
<span class='co'># The context stacks includes all intervening execution frames. The</span>
<span class='co'># call stack doesn't:</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='no'>x</span>)
<span class='fu'>f</span>(<span class='fu'>f</span>(<span class='fu'>ctxt_stack</span>()))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 39&gt; (38)
#&gt; expr: identity(x)
#&gt; env:  [local 0x79db588]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 38&gt; (35)
#&gt; expr: f(ctxt_stack())
#&gt; env:  [local 0x79df2a0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: identity(x)
#&gt; env:  [local 0x79df188]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: f(f(ctxt_stack()))
#&gt; env:  [local 0x79df038]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x79dee78]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x79dec10]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x79de660]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x79de0e8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x79ddda0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x79dda58]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7a08040]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7a07e10]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7a07c88]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7a07ba8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7a43b10]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[40]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span>(<span class='fu'>f</span>(<span class='fu'>call_stack</span>()))</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_stack()` is soft-deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'>This warning is displayed once per session.</span></div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5b0d240]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>cmd</span>) <span class='fu'>cmd</span>()
<span class='fu'>f</span>(<span class='fu'>g</span>(<span class='no'>ctxt_stack</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 38&gt; (35)
#&gt; expr: g(ctxt_stack)
#&gt; env:  [local 0x5563150]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: identity(x)
#&gt; env:  [local 0x5563038]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: f(g(ctxt_stack))
#&gt; env:  [local 0x5562f20]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x5562d60]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x5562b30]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x5562510]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x5561f98]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x5561c50]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x5561908]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x5564e40]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x5564c10]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x5564a88]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x55649a8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x559a360]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span>(<span class='fu'>g</span>(<span class='no'>call_stack</span>))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 38&gt; (34)
#&gt; expr: g(call_stack)
#&gt; env:  [local 0x1b98750]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x26154e8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='co'># The rlang _stack() functions return a list of frame</span>
<span class='co'># objects. Use purrr::transpose() or index a field with</span>
<span class='co'># purrr::map()'s to extract a particular field from a stack:</span>

<span class='co'># stack &lt;- f(f(call_stack()))</span>
<span class='co'># purrr::map(stack, "env")</span>
<span class='co'># purrr::transpose(stack)$expr</span>

<span class='co'># current_frame() is an alias for ctxt_frame(1)</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>current</span> <span class='kw'>=</span> <span class='fu'>current_frame</span>(), <span class='kw'>first</span> <span class='kw'>=</span> <span class='fu'>ctxt_frame</span>(<span class='fl'>1</span>))
<span class='fu'>fn</span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: `current_frame()` is soft-deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'>This warning is displayed once per session.</span></div><div class='output co'>#&gt; $current
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: fn()
#&gt; env:  [local 0x7cb3150]
#&gt; 
#&gt; $first
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: fn()
#&gt; env:  [local 0x7cb3150]
#&gt; </div><div class='input'>
<span class='co'># While current_frame() is the top of the stack, global_frame() is</span>
<span class='co'># the bottom:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>() {
  <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>ctxt_depth</span>()
  <span class='fu'>ctxt_frame</span>(<span class='no'>n</span>)
}
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identical'>identical</a></span>(<span class='fu'>fn</span>(), <span class='fu'>global_frame</span>())</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

<span class='co'># ctxt_stack() returns a stack with all intervening frames. You can</span>
<span class='co'># trim layers of intervening frames with the trim argument:</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_stack</span>()))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 37&gt; (35)
#&gt; expr: identity(ctxt_stack())
#&gt; env:  [local 0x90233f0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: identity(identity(ctxt_stack()))
#&gt; env:  [local 0x9023508]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x90236c8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x9023930]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x9023ee0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x9024458]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x90247a0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x9024ae8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x9021380]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x90215b0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x9021738]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x9021818]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x80081e8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_stack</span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>1</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x80d8fb8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x80d8d88]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x80d87d8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x80d81b8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x80d7dc8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x80d7a48]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x83ef608]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x83ef330]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x83ef1a8]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x83ef090]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7f0bbb0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># ctxt_stack() is called within fn() with intervening frames:</span>
<span class='no'>fn</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>trim</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>ctxt_stack</span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='no'>trim</span>)))
<span class='fu'>fn</span>(<span class='fl'>0</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 38&gt; (36)
#&gt; expr: identity(ctxt_stack(trim = trim))
#&gt; env:  [local 0x622ab00]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 37&gt; (36)
#&gt; expr: identity(identity(ctxt_stack(trim = trim)))
#&gt; env:  [local 0x622a9e8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: fn(0)
#&gt; env:  [local 0x622a8d0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x622d7b0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x622d580]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x622cf60]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x622c978]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x622c630]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x622c2e8]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x62314d8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x62312a8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x6231120]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x6230f98]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x6251e40]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># We can trim the first layer of those:</span>
<span class='fu'>fn</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: fn(1)
#&gt; env:  [local 0x573e7b0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x573e5f0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x573e388]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x5741c08]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x5741658]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x5741310]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x5740f58]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x5740820]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x5740548]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x57403c0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x57402e0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x5779f60]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># The outside intervening frames (at the fn() call site) are still</span>
<span class='co'># returned, but can be trimmed as well:</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>fn</span>(<span class='fl'>1</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 38&gt; (35)
#&gt; expr: fn(1)
#&gt; env:  [local 0x3d7a970]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 37&gt; (35)
#&gt; expr: identity(fn(1))
#&gt; env:  [local 0x3d7a858]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: identity(identity(fn(1)))
#&gt; env:  [local 0x3d7a708]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x3d7a548]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x3d7a270]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x3d7da80]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x3d7d000]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x3d7cc80]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x3d7c858]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x3d8b4c0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x3d8b258]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x3d8b0d0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x3d8aff0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x3df7ad0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[38]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[39]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>fn</span>(<span class='fl'>2</span>)))</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x65016d0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x6501900]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x6501eb0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x6502428]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x6502770]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x6502ab8]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x8f7e6a0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x8f7e8d0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x8f7ea58]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x8f7eb38]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x881bc50]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>trim</span>) <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identity'>identity</a></span>(<span class='fu'>fn</span>(<span class='no'>trim</span>)))
<span class='fu'>g</span>(<span class='fl'>2</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 36&gt; (35)
#&gt; expr: g(2)
#&gt; env:  [local 0x850d8f8]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x850dab8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x850dce8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x850e298]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x850e810]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x850eb58]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x850eea0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x83bab08]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x83bad38]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x83baec0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x83bafa0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x8467ec8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[37]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>g</span>(<span class='fl'>3</span>)</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 35&gt; (34)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x812a480]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 34&gt; (24)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7e5dd08]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 33&gt; (24)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7e5daa0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 32&gt; (24)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7e5d4b8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 31&gt; (30)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x74785b0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 30&gt; (29)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7478268]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 29&gt; (28)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7477f20]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7477858]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 27&gt; (26)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7477628]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x74774a0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x74773c0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7c82998]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 23&gt; (22)
#&gt; expr: evaluate::evaluate(code, env, new_device = TRUE)
#&gt; env:  [frame 0x7acafc8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 22&gt; (21)
#&gt; expr: .f(code = .l[[c(1L, 1L)]], run = .l[[c(2L, 1L)]], show = .l[[c(3L,  &lt;...&gt;
#&gt; env:  [frame 0x7acc688]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 21&gt; (20)
#&gt; expr: purrr::pmap_chr(list(code = code, run = run, show = show), format_example_chunk,  &lt;...&gt;
#&gt; env:  [frame 0x92459b0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 20&gt; (18)
#&gt; expr: as_data.tag_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a7c28]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: as_data(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x81a85c8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x2621258]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x3d49c48]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x6c51558]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 15&gt; (14)
#&gt; expr: build_reference(pkg, lazy = lazy, document = document, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x4fc3208]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, document = document,  &lt;...&gt;
#&gt; env:  [frame 0x184c128]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: pkgdown::build_site(...)
#&gt; env:  [frame 0x1cf0930]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 12&gt; (0)
#&gt; expr: (function (..., crayon_enabled, crayon_colors, pkgdown_internet)  &lt;...&gt;
#&gt; env:  [frame 0x3558290]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 11&gt; (0)
#&gt; expr: (function (what, args, quote = FALSE, envir = parent.frame())  &lt;...&gt;
#&gt; env:  [frame 0x3559250]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 10&gt; (0)
#&gt; expr: do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x35490b0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 9&gt; (0)
#&gt; expr: saveRDS(do.call(do.call, c(readRDS("/tmp/RtmpLvKGyd/file3b3d6016e5ac"),  &lt;...&gt;
#&gt; env:  [frame 0x3549e40]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 8&gt; (0)
#&gt; expr: withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3544c18]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3545dd0]
#&gt; 
#&gt; [[30]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [frame 0x3546118]
#&gt; 
#&gt; [[31]]
#&gt; &lt;frame 5&gt; (2)
#&gt; expr: tryCatchList(expr, names[-nh], parentenv, handlers[-nh])
#&gt; env:  [frame 0x35426a0]
#&gt; 
#&gt; [[32]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [frame 0x3542c50]
#&gt; 
#&gt; [[33]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: tryCatchOne(tryCatchList(expr, names[-nh], parentenv, handlers[-nh]),  &lt;...&gt;
#&gt; env:  [frame 0x3542f98]
#&gt; 
#&gt; [[34]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [frame 0x35432e0]
#&gt; 
#&gt; [[35]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: tryCatch(withCallingHandlers({ &lt;...&gt;
#&gt; env:  [frame 0x3543a50]
#&gt; 
#&gt; [[36]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#life-cycle">Life cycle</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

